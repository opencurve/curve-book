"use strict";(self.webpackChunkcurve_book=self.webpackChunkcurve_book||[]).push([[8506],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var l=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=l.createContext({}),o=function(e){var t=l.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=o(e.components);return l.createElement(p.Provider,{value:t},e.children)},i="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},d=l.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,p=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),i=o(a),d=n,m=i["".concat(p,".").concat(d)]||i[d]||k[d]||r;return a?l.createElement(m,s(s({ref:t},c),{},{components:a})):l.createElement(m,s({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=d;var u={};for(var p in t)hasOwnProperty.call(t,p)&&(u[p]=t[p]);u.originalType=e,u[i]="string"==typeof e?e:n,s[1]=u;for(var o=2;o<r;o++)s[o]=a[o];return l.createElement.apply(null,s)}return l.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2549:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>k,frontMatter:()=>r,metadata:()=>u,toc:()=>o});var l=a(7462),n=(a(7294),a(3905));const r={},s="\u547d\u4ee4\u884c\u5de5\u5177",u={unversionedId:"CurveBS/maintenance/command-line-tools",id:"CurveBS/maintenance/command-line-tools",title:"\u547d\u4ee4\u884c\u5de5\u5177",description:"Curve \u547d\u4ee4\u884c\u5de5\u5177\u4ee3\u7801\u4ed3\u5e93\u5730\u5740\uff1ahttps://github.com/opencurve/curve/blob/master/tools-v2/README.md",source:"@site/docs/02-CurveBS/07-maintenance/01-command-line-tools.md",sourceDirName:"02-CurveBS/07-maintenance",slug:"/CurveBS/maintenance/command-line-tools",permalink:"/CurveBS/maintenance/command-line-tools",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u8fd0\u7ef4",permalink:"/category/\u8fd0\u7ef4"},next:{title:"\u7ba1\u7406\u5458\u64cd\u4f5c\u6307\u5bfc",permalink:"/category/\u7ba1\u7406\u5458\u64cd\u4f5c\u6307\u5bfc"}},p={},o=[{value:"How to use curve tool",id:"how-to-use-curve-tool",level:2},{value:"Install",id:"install",level:3},{value:"Introduction",id:"introduction",level:3},{value:"Command",id:"command",level:2},{value:"version",id:"version",level:3},{value:"completion",id:"completion",level:3},{value:"upgrade",id:"upgrade",level:3},{value:"fs",id:"fs",level:3},{value:"check",id:"check",level:4},{value:"check copyset",id:"check-copyset",level:5},{value:"create",id:"create",level:4},{value:"create fs",id:"create-fs",level:5},{value:"create topology",id:"create-topology",level:5},{value:"delete",id:"delete",level:4},{value:"delete fs",id:"delete-fs",level:5},{value:"list",id:"list",level:4},{value:"list copyset",id:"list-copyset",level:5},{value:"list fs",id:"list-fs",level:5},{value:"list mountpoint",id:"list-mountpoint",level:5},{value:"list partition",id:"list-partition",level:5},{value:"list topology",id:"list-topology",level:5},{value:"query",id:"query",level:4},{value:"query copyset",id:"query-copyset",level:5},{value:"query fs",id:"query-fs",level:5},{value:"query inode",id:"query-inode",level:5},{value:"query metaserver",id:"query-metaserver",level:5},{value:"query partition",id:"query-partition",level:5},{value:"status",id:"status",level:4},{value:"status mds",id:"status-mds",level:5},{value:"status metaserver",id:"status-metaserver",level:5},{value:"status etcd",id:"status-etcd",level:5},{value:"status copyset",id:"status-copyset",level:5},{value:"status cluster",id:"status-cluster",level:5},{value:"umount",id:"umount",level:4},{value:"umount fs",id:"umount-fs",level:5},{value:"usage",id:"usage",level:4},{value:"usage inode",id:"usage-inode",level:5},{value:"usage metadata",id:"usage-metadata",level:5},{value:"warmup",id:"warmup",level:4},{value:"warmup add",id:"warmup-add",level:4},{value:"bs",id:"bs",level:3},{value:"list",id:"list-1",level:4},{value:"list logical-pool",id:"list-logical-pool",level:6},{value:"list server",id:"list-server",level:6},{value:"list client",id:"list-client",level:6},{value:"list dir",id:"list-dir",level:6},{value:"list space",id:"list-space",level:6},{value:"list chunkserver",id:"list-chunkserver",level:6},{value:"list scan-status",id:"list-scan-status",level:6},{value:"list may-broken-vol",id:"list-may-broken-vol",level:6},{value:"clean-recycle",id:"clean-recycle",level:4},{value:"query",id:"query-1",level:4},{value:"query file",id:"query-file",level:6},{value:"query chunk",id:"query-chunk",level:6},{value:"query segment",id:"query-segment",level:6},{value:"query scan-status",id:"query-scan-status",level:5},{value:"status",id:"status-1",level:4},{value:"status etcd",id:"status-etcd-1",level:5},{value:"status mds",id:"status-mds-1",level:5},{value:"status client",id:"status-client",level:5},{value:"status snapshotserver",id:"status-snapshotserver",level:5},{value:"status chunkserver",id:"status-chunkserver",level:5},{value:"status copyset",id:"status-copyset-1",level:5},{value:"delete",id:"delete-1",level:4},{value:"delete peer",id:"delete-peer",level:5},{value:"delete volume",id:"delete-volume",level:5},{value:"delete volume clone",id:"delete-volume-clone",level:6},{value:"delete volume recover",id:"delete-volume-recover",level:6},{value:"update",id:"update",level:4},{value:"update peer",id:"update-peer",level:5},{value:"update leader",id:"update-leader",level:5},{value:"update file",id:"update-file",level:5},{value:"update throttle",id:"update-throttle",level:5},{value:"update scan-state",id:"update-scan-state",level:5},{value:"update copyset availflag",id:"update-copyset-availflag",level:5},{value:"update leader-schedule",id:"update-leader-schedule",level:5},{value:"create",id:"create-1",level:4},{value:"create file",id:"create-file",level:5},{value:"create dir",id:"create-dir",level:5},{value:"check",id:"check-1",level:4},{value:"check copyset",id:"check-copyset-1",level:5},{value:"check chunkserver",id:"check-chunkserver",level:5},{value:"check server",id:"check-server",level:5},{value:"snapshot",id:"snapshot",level:4},{value:"snapshot copyset",id:"snapshot-copyset",level:5},{value:"Comparison of old and new commands",id:"comparison-of-old-and-new-commands",level:2},{value:"curve fs",id:"curve-fs",level:3},{value:"curve bs",id:"curve-bs",level:3}],c={toc:o},i="wrapper";function k(e){let{components:t,...a}=e;return(0,n.kt)(i,(0,l.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"\u547d\u4ee4\u884c\u5de5\u5177"},"\u547d\u4ee4\u884c\u5de5\u5177"),(0,n.kt)("p",null,"Curve \u547d\u4ee4\u884c\u5de5\u5177\u4ee3\u7801\u4ed3\u5e93\u5730\u5740\uff1a",(0,n.kt)("a",{parentName:"p",href:"https://github.com/opencurve/curve/blob/master/tools-v2/README.md"},"https://github.com/opencurve/curve/blob/master/tools-v2/README.md")),(0,n.kt)("p",null,"\u5de5\u5177\u76ee\u524d\u8fd8\u5728\u7ee7\u7eed\u5f00\u53d1\u5b8c\u5584\u4e4b\u4e2d\uff0c\u6b22\u8fce\u63d0\u4ea4issue\u6216pr\u3002"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#curve-tool-usage"},"curve tool usage"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#how-to-use-curve-tool"},"How to use curve tool"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#install"},"Install")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#introduction"},"Introduction")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#command"},"Command"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#version"},"version")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#completion"},"completion")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#upgrade"},"upgrade")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#fs"},"fs"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#check"},"check"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#check-copyset"},"check copyset")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create"},"create"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-fs"},"create fs")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-topology"},"create topology")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#delete"},"delete"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#delete-fs"},"delete fs")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list"},"list"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-copyset"},"list copyset")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-fs"},"list fs")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-mountpoint"},"list mountpoint")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-partition"},"list partition")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-topology"},"list topology")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query"},"query"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-copyset"},"query copyset")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-fs"},"query fs")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-inode"},"query inode")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-metaserver"},"query metaserver")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-partition"},"query partition")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status"},"status"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-mds"},"status mds")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-metaserver"},"status metaserver")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-etcd"},"status etcd")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-copyset"},"status copyset")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-cluster"},"status cluster")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#umount"},"umount"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#umount-fs"},"umount fs")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#usage"},"usage"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#usage-inode"},"usage inode")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#usage-metadata"},"usage metadata")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#warmup"},"warmup")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#warmup-add"},"warmup add")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#bs"},"bs"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-1"},"list"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-logical-pool"},"list logical-pool")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-server"},"list server")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-client"},"list client")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-dir"},"list dir")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-space"},"list space")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-chunkserver"},"list chunkserver")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-scan-status"},"list scan-status")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#list-may-broken-vol"},"list may-broken-vol")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#clean-recycle"},"clean-recycle")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-1"},"query"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-file"},"query file")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-chunk"},"query chunk")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-segment"},"query segment")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#query-scan-status"},"query scan-status")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-1"},"status"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-etcd-1"},"status etcd")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-mds-1"},"status mds")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-client"},"status client")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-snapshotserver"},"status snapshotserver")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-chunkserver"},"status chunkserver")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#status-copyset-1"},"status copyset")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#delete-1"},"delete"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#delete-peer"},"delete peer")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#delete-volume"},"delete volume"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#delete-volume-clone"},"delete volume clone")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#delete-volume-recover"},"delete volume recover")))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update"},"update"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update-peer"},"update peer")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update-leader"},"update leader")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update-file"},"update file")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update-throttle"},"update throttle")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update-scan-state"},"update scan-state")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update-copyset-availflag"},"update copyset availflag")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#update-leader-schedule"},"update leader-schedule")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-1"},"create"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-file"},"create file")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-dir"},"create dir")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#check-1"},"check"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#check-copyset-1"},"check copyset")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#check-chunkserver"},"check chunkserver")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#check-server"},"check server")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#snapshot"},"snapshot"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#snapshot-copyset"},"snapshot copyset")))))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#comparison-of-old-and-new-commands"},"Comparison of old and new commands"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#curve-fs"},"curve fs")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#curve-bs"},"curve bs"))))))),(0,n.kt)("h2",{id:"how-to-use-curve-tool"},"How to use curve tool"),(0,n.kt)("h3",{id:"install"},"Install"),(0,n.kt)("p",null,"install curve tool"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"wget https://curve-tool.nos-eastchina1.126.net/release/curve-latest\nchmod +x curve-latest\nmv curve-latest /usr/bin/curve\n")),(0,n.kt)("p",null,"set configure file"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"wget https://raw.githubusercontent.com/opencurve/curve/master/tools-v2/pkg/config/curve.yaml\n")),(0,n.kt)("p",null,"or"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"wget https://curve-tool.nos-eastchina1.126.net/config/curve.yaml\n")),(0,n.kt)("p",null,"Please modify the ",(0,n.kt)("inlineCode",{parentName:"p"},"mdsAddr, mdsDummyAddr, etcdAddr")," under ",(0,n.kt)("inlineCode",{parentName:"p"},"curvefs/bs")," in the template.yaml file as required"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mv curve.yaml ~/.curve/curve.yaml\n")),(0,n.kt)("p",null,"or"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mv curve.yaml /etc/curve/curve.yaml\n")),(0,n.kt)("h3",{id:"introduction"},"Introduction"),(0,n.kt)("p",null,"Here's how to use the tool"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve COMMAND [options]\n")),(0,n.kt)("p",null,"When you are not sure how to use a command, --help can give you an example of use:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve COMMAND --help\n")),(0,n.kt)("p",null,"For example:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'curve fs status mds --help\nUsage:  curve fs status mds [flags]\n\nget the inode usage of curvefs\n\nFlags:\n  -c, --conf string            config file (default is $HOME/.curve/curve.yaml or /etc/curve/curve.yaml)\n  -f, --format string          Output format (json|plain) (default "plain")\n  -h, --help                   Print usage\n      --httptimeout duration   http timeout (default 500ms)\n      --mdsaddr string         mds address, should be like 127.0.0.1:6700,127.0.0.1:6701,127.0.0.1:6702\n      --mdsdummyaddr string    mds dummy address, should be like 127.0.0.1:7700,127.0.0.1:7701,127.0.0.1:7702\n      --showerror              display all errors in command\n\nExamples:\n$ curve fs status mds\n')),(0,n.kt)("p",null,"In addition, this tool reads the configuration from ",(0,n.kt)("inlineCode",{parentName:"p"},"$HOME/.curve/curve.yaml")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/curve/curve.yaml")," by default,\nand can be specified by ",(0,n.kt)("inlineCode",{parentName:"p"},"--conf")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"-c"),"."),(0,n.kt)("h2",{id:"command"},"Command"),(0,n.kt)("h3",{id:"version"},"version"),(0,n.kt)("p",null,"show the version of curve tool"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve --version\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve v1.2\n")),(0,n.kt)("h3",{id:"completion"},"completion"),(0,n.kt)("p",null,"generate curve bash/zsh/fish completion script"),(0,n.kt)("p",null,"Take bash as an example:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve completion bash > /etc/bash_completion.d/curve\n")),(0,n.kt)("p",null,"If you perform completion you get the following error:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve [tab]bash: _get_comp_words_by_ref: command not found\n")),(0,n.kt)("p",null,"You need to install bash-completion:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install bash-completion\nsource /usr/share/bash-completion/bash_completion\n")),(0,n.kt)("h3",{id:"upgrade"},"upgrade"),(0,n.kt)("p",null,"Upgrade curve to latest version"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve upgrade\n")),(0,n.kt)("p",null,"If you want to upgrade to the specified version(ee500438):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"CURVE_VERSION=ee500438 curve upgrade\n")),(0,n.kt)("p",null,"If you are in an offline environment, you can also set up a temporary http server to provide upgrade services for other machines:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'# 192.168.1.1\necho "123456" > __version\ncp curve curve-123456\npython3 -m http.server 1234\n')),(0,n.kt)("p",null,"In this way, it can be upgraded on other machines"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"CURVE_BASE_URL=http://192.168.1.1:1234/ curve upgrade\n")),(0,n.kt)("h3",{id:"fs"},"fs"),(0,n.kt)("h4",{id:"check"},"check"),(0,n.kt)("h5",{id:"check-copyset"},"check copyset"),(0,n.kt)("p",null,"check copysets health in curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs check copyset --copysetid 1 --poolid 1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+------------+-----------+--------+--------+---------+\n| COPYSETKEY | COPYSETID | POOLID | STATUS | EXPLAIN |\n+------------+-----------+--------+--------+---------+\n| 4294967297 |         1 |      1 | ok     |         |\n+------------+-----------+--------+--------+---------+\n")),(0,n.kt)("h4",{id:"create"},"create"),(0,n.kt)("h5",{id:"create-fs"},"create fs"),(0,n.kt)("p",null,"create a fs in curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs create fs --fsname test3\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+--------+-------------------------------------------+\n| FSNAME |                  RESULT                   |\n+--------+-------------------------------------------+\n| test3  | fs exist, but s3 info is not inconsistent |\n+--------+-------------------------------------------+\n")),(0,n.kt)("h5",{id:"create-topology"},"create topology"),(0,n.kt)("p",null,"create curvefs topology"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs create topology --clustermap topology.json\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+-------------------+--------+-----------+--------+\n|       NAME        |  TYPE  | OPERATION | PARENT |\n+-------------------+--------+-----------+--------+\n| pool2             | pool   | del       |        |\n+-------------------+--------+           +--------+\n| zone4             | zone   |           | pool2  |\n+-------------------+--------+           +--------+\n| **.***.***.**_3_0 | server |           | zone4  |\n+-------------------+--------+-----------+--------+\n")),(0,n.kt)("h4",{id:"delete"},"delete"),(0,n.kt)("h5",{id:"delete-fs"},"delete fs"),(0,n.kt)("p",null,"delete a fs from curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs delete fs --fsname test1\nWARNING:Are you sure to delete fs test1?\nplease input [test1] to confirm: test1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+--------+-------------------------------------+\n| FSNAME |               RESULT                |\n+--------+-------------------------------------+\n| test1  | delete fs failed!, error is FS_BUSY |\n+--------+-------------------------------------+\n")),(0,n.kt)("h4",{id:"list"},"list"),(0,n.kt)("h5",{id:"list-copyset"},"list copyset"),(0,n.kt)("p",null,"list all copyset info of the curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs list copyset\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'+------------+-----------+--------+-------+--------------------------------+------------+\n|    KEY     | COPYSETID | POOLID | EPOCH |           LEADERPEER           | PEERNUMBER |\n+------------+-----------+--------+-------+--------------------------------+------------+\n| 4294967302 | 6         | 1      | 2     | id:1                           | 3          |\n|            |           |        |       | address:"**.***.***.**:6801:0" |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967303 | 7         |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967304 | 8         |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967307 | 11        |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+--------------------------------+------------+\n| 4294967297 | 1         |        | 1     | id:2                           | 3          |\n|            |           |        |       | address:"**.***.***.**:6802:0" |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967301 | 5         |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967308 | 12        |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+--------------------------------+------------+\n| 4294967298 | 2         |        | 1     | id:3                           | 3          |\n|            |           |        |       | address:"**.***.***.**:6800:0" |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967299 | 3         |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967300 | 4         |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967305 | 9         |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+        +-------+                                +------------+\n| 4294967306 | 10        |        | 1     |                                | 3          |\n|            |           |        |       |                                |            |\n+------------+-----------+--------+-------+--------------------------------+------------+\n')),(0,n.kt)("h5",{id:"list-fs"},"list fs"),(0,n.kt)("p",null,"list all fs info in the curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs list fs\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+----+-------+--------+--------------+-----------+---------+----------+-----------+----------+\n| ID | NAME  | STATUS |   CAPACITY   | BLOCKSIZE | FSTYPE  | SUMINDIR |   OWNER   | MOUNTNUM |\n+----+-------+--------+--------------+-----------+---------+----------+-----------+----------+\n| 2  | test1 | INITED | 107374182400 | 1048576   | TYPE_S3 | false    | anonymous | 1        |\n+----+-------+--------+--------------+-----------+         +----------+           +----------+\n| 3  | test3 | INITED | 107374182400 | 1048576   |         | false    |           | 0        |\n+----+-------+--------+--------------+-----------+---------+----------+-----------+----------+\n")),(0,n.kt)("h5",{id:"list-mountpoint"},"list mountpoint"),(0,n.kt)("p",null,"list all mountpoint of the curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs list mountpoint\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+------+--------+-------------------------------------------------------------------+\n| FSID | FSNAME |                            MOUNTPOINT                             |\n+------+--------+-------------------------------------------------------------------+\n| 2    | test1  | siku-QiTianM420-N000:9002:/curvefs/client/mnt/home/siku/temp/mnt1 |\n+      +        +-------------------------------------------------------------------+\n|      |        | siku-QiTianM420-N000:9003:/curvefs/client/mnt/home/siku/temp/mnt2 |\n+------+--------+-------------------------------------------------------------------+\n")),(0,n.kt)("h5",{id:"list-partition"},"list partition"),(0,n.kt)("p",null,"list partition in curvefs by fsid"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs list partition\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+-------------+------+--------+-----------+----------+----------+-----------+\n| PARTITIONID | FSID | POOLID | COPYSETID |  START   |   END    |  STATUS   |\n+-------------+------+--------+-----------+----------+----------+-----------+\n| 14          | 2    | 1      | 10        | 1048676  | 2097351  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 20          |      |        |           | 7340732  | 8389407  | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 13          |      |        | 11        | 0        | 1048675  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 16          |      |        |           | 3146028  | 4194703  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 22          |      |        |           | 9438084  | 10486759 | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 21          |      |        | 5         | 8389408  | 9438083  | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 23          |      |        | 7         | 10486760 | 11535435 | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 24          |      |        |           | 11535436 | 12584111 | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 15          |      |        | 8         | 2097352  | 3146027  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 18          |      |        |           | 5243380  | 6292055  | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 17          |      |        | 9         | 4194704  | 5243379  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 19          |      |        |           | 6292056  | 7340731  | READWRITE |\n+-------------+------+        +-----------+----------+----------+-----------+\n| 26          | 3    |        | 2         | 1048676  | 2097351  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 30          |      |        |           | 5243380  | 6292055  | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 34          |      |        | 3         | 9438084  | 10486759 | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 29          |      |        | 4         | 4194704  | 5243379  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 32          |      |        |           | 7340732  | 8389407  | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 35          |      |        | 5         | 10486760 | 11535435 | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 27          |      |        |           | 2097352  | 3146027  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 33          |      |        |           | 8389408  | 9438083  | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 25          |      |        | 6         | 0        | 1048675  | READWRITE |\n+-------------+      +        +           +----------+----------+-----------+\n| 36          |      |        |           | 11535436 | 12584111 | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 28          |      |        | 8         | 3146028  | 4194703  | READWRITE |\n+-------------+      +        +-----------+----------+----------+-----------+\n| 31          |      |        | 9         | 6292056  | 7340731  | READWRITE |\n+-------------+------+--------+-----------+----------+----------+-----------+\n")),(0,n.kt)("h5",{id:"list-topology"},"list topology"),(0,n.kt)("p",null,"list the topology of the curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs list topology\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+----+------------+--------------------+------------+-----------------------+\n| ID |    TYPE    |        NAME        | CHILDTYPE  |       CHILDLIST       |\n+----+------------+--------------------+------------+-----------------------+\n| 1  | pool       | pool1              | zone       | zone3 zone2 zone1     |\n+----+------------+--------------------+------------+-----------------------+\n| 3  | zone       | zone3              | server     | **.***.***.**_2_0     |\n+----+            +--------------------+            +-----------------------+\n| 2  |            | zone2              |            | **.***.***.**_1_0     |\n+----+            +--------------------+            +-----------------------+\n| 1  |            | zone1              |            | **.***.***.**_0_0     |\n+----+------------+--------------------+------------+-----------------------+\n| 3  | server     | **.***.***.**_2_0  | metaserver | curvefs-metaserver.2  |\n+----+            +--------------------+            +-----------------------+\n| 2  |            | **.***.***.**_1_0  |            | curvefs-metaserver.1  |\n+----+            +--------------------+            +-----------------------+\n| 1  |            | **.***.***.**_0_0  |            | curvefs-metaserver.3  |\n+----+------------+--------------------+------------+-----------------------+\n| 3  | metaserver | curvefs-metaserver |            |                       |\n+----+            +--------------------+------------+-----------------------+\n| 2  |            | curvefs-metaserver |            |                       |\n+----+            +--------------------+------------+-----------------------+\n| 1  |            | curvefs-metaserver |            |                       |\n+----+------------+--------------------+------------+-----------------------+\n")),(0,n.kt)("h4",{id:"query"},"query"),(0,n.kt)("h5",{id:"query-copyset"},"query copyset"),(0,n.kt)("p",null,"query copysets in curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs query copyset --copysetid 1 --poolid 1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'+------------+-----------+--------+--------------------------------------+-------+\n| copysetKey | copysetId | poolId |              leaderPeer              | epoch |\n+------------+-----------+--------+--------------------------------------+-------+\n| 4294967297 |     1     |   1    | id:2  address:"**.***.***.**:6802:0" |   1   |\n+------------+-----------+--------+--------------------------------------+-------+\n')),(0,n.kt)("h5",{id:"query-fs"},"query fs"),(0,n.kt)("p",null,"query fs in curvefs by fsname or fsid"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs query fs --fsname test1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+----+-------+--------+--------------+-----------+---------+----------+-----------+----------+\n| id | name  | status |   capacity   | blocksize | fsType  | sumInDir |   owner   | mountNum |\n+----+-------+--------+--------------+-----------+---------+----------+-----------+----------+\n| 2  | test1 | INITED | 107374182400 |  1048576  | TYPE_S3 |  false   | anonymous |    2     |\n+----+-------+--------+--------------+-----------+---------+----------+-----------+----------+\n")),(0,n.kt)("h5",{id:"query-inode"},"query inode"),(0,n.kt)("p",null,"query the inode of fs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs query inode --fsid 2 --inodeid 5243380\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+-------+----------+-----------+---------+-------+--------+\n| fs id | inode id |  length   |  type   | nlink | parent |\n+-------+----------+-----------+---------+-------+--------+\n|   2   | 5243380  | 352321536 | TYPE_S3 |   1   |  [1]   |\n+-------+----------+-----------+---------+-------+--------+\n")),(0,n.kt)("h5",{id:"query-metaserver"},"query metaserver"),(0,n.kt)("p",null,"query metaserver in curvefs by metaserverid or metaserveraddr"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs query metaserver --metaserveraddr **.***.***.**:6801,**.***.***.**:6802\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+----+--------------------+--------------------+--------------------+-------------+\n| id |      hostname      |    internalAddr    |    externalAddr    | onlineState |\n+----+--------------------+--------------------+--------------------+-------------+\n| 1  | curvefs-metaserver | **.***.***.**:6801 | **.***.***.**:6801 |   ONLINE    |\n| 2  | curvefs-metaserver | **.***.***.**:6802 | **.***.***.**:6802 |   ONLINE    |\n+----+--------------------+--------------------+--------------------+-------------+\n")),(0,n.kt)("h5",{id:"query-partition"},"query partition"),(0,n.kt)("p",null,"query the copyset of partition"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs query partition --partitionid 14\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+----+--------+-----------+--------+----------------------+\n| id | poolId | copysetId | peerId |       peerAddr       |\n+----+--------+-----------+--------+----------------------+\n| 14 |   1    |    10     |   1    | **.***.***.**:6801:0 |\n| 14 |   1    |    10     |   2    | **.***.***.**:6802:0 |\n| 14 |   1    |    10     |   3    | **.***.***.**:6800:0 |\n+----+--------+-----------+--------+----------------------+\n")),(0,n.kt)("h4",{id:"status"},"status"),(0,n.kt)("h5",{id:"status-mds"},"status mds"),(0,n.kt)("p",null,"get status of mds"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs status mds\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+--------------------+--------------------+----------------+----------+\n|        addr        |     dummyAddr      |    version     |  status  |\n+--------------------+--------------------+----------------+----------+\n| **.***.***.**:6700 | **.***.***.**:7700 | 8fc48476+debug | follower |\n| **.***.***.**:6701 | **.***.***.**:7701 | 8fc48476+debug | follower |\n| **.***.***.**:6702 | **.***.***.**:7702 | 8fc48476+debug |  leader  |\n+--------------------+--------------------+----------------+----------+\n")),(0,n.kt)("h5",{id:"status-metaserver"},"status metaserver"),(0,n.kt)("p",null,"get status of metaserver"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs status metaserver\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+--------------------+--------------------+----------------+--------+\n|    externalAddr    |    internalAddr    |    version     | status |\n+--------------------+--------------------+----------------+--------+\n| **.***.***.**:6800 | **.***.***.**:6800 | 8fc48476+debug | online |\n| **.***.***.**:6802 | **.***.***.**:6802 | 8fc48476+debug | online |\n| **.***.***.**:6801 | **.***.***.**:6801 | 8fc48476+debug | online |\n+--------------------+--------------------+----------------+--------+\n")),(0,n.kt)("h5",{id:"status-etcd"},"status etcd"),(0,n.kt)("p",null,"get status of etcd"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs status etcd\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+---------------------+---------+----------+\n|        addr         | version |  status  |\n+---------------------+---------+----------+\n| **.***.***.**:23790 | 3.4.10  | follower |\n| **.***.***.**:23791 | 3.4.10  | follower |\n| **.***.***.**:23792 | 3.4.10  |  leader  |\n+---------------------+---------+----------+\n")),(0,n.kt)("h5",{id:"status-copyset"},"status copyset"),(0,n.kt)("p",null,"get status of copyset"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs status copyset\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+------------+-----------+--------+--------+---------+\n| copysetKey | copysetId | poolId | status | explain |\n+------------+-----------+--------+--------+---------+\n| 4294967297 |     1     |   1    |   ok   |         |\n| 4294967298 |     2     |   1    |   ok   |         |\n| 4294967299 |     3     |   1    |   ok   |         |\n| 4294967300 |     4     |   1    |   ok   |         |\n| 4294967301 |     5     |   1    |   ok   |         |\n| 4294967302 |     6     |   1    |   ok   |         |\n| 4294967303 |     7     |   1    |   ok   |         |\n| 4294967304 |     8     |   1    |   ok   |         |\n| 4294967305 |     9     |   1    |   ok   |         |\n| 4294967306 |    10     |   1    |   ok   |         |\n| 4294967307 |    11     |   1    |   ok   |         |\n| 4294967308 |    12     |   1    |   ok   |         |\n+------------+-----------+--------+--------+---------+\n")),(0,n.kt)("h5",{id:"status-cluster"},"status cluster"),(0,n.kt)("p",null,"get status of cluster"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs status cluster\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"etcd:\n+---------------------+---------+----------+\n|        addr         | version |  status  |\n+---------------------+---------+----------+\n| **.***.***.**:23790 | 3.4.10  | follower |\n| **.***.***.**:23791 | 3.4.10  | follower |\n| **.***.***.**:23792 | 3.4.10  |  leader  |\n+---------------------+---------+----------+\n\nmds:\n+--------------------+--------------------+----------------+----------+\n|        addr        |     dummyAddr      |    version     |  status  |\n+--------------------+--------------------+----------------+----------+\n| **.***.***.**:6700 | **.***.***.**:7700 | 8fc48476+debug | follower |\n| **.***.***.**:6701 | **.***.***.**:7701 | 8fc48476+debug | follower |\n| **.***.***.**:6702 | **.***.***.**:7702 | 8fc48476+debug |  leader  |\n+--------------------+--------------------+----------------+----------+\n\nmeataserver:\n+--------------------+--------------------+----------------+--------+\n|    externalAddr    |    internalAddr    |    version     | status |\n+--------------------+--------------------+----------------+--------+\n| **.***.***.**:6800 | **.***.***.**:6800 | 8fc48476+debug | online |\n| **.***.***.**:6802 | **.***.***.**:6802 | 8fc48476+debug | online |\n| **.***.***.**:6801 | **.***.***.**:6801 | 8fc48476+debug | online |\n+--------------------+--------------------+----------------+--------+\n\ncopyset:\n+------------+-----------+--------+--------+---------+\n| copysetKey | copysetId | poolId | status | explain |\n+------------+-----------+--------+--------+---------+\n| 4294967297 |     1     |   1    |   ok   |         |\n| 4294967298 |     2     |   1    |   ok   |         |\n| 4294967299 |     3     |   1    |   ok   |         |\n| 4294967300 |     4     |   1    |   ok   |         |\n| 4294967301 |     5     |   1    |   ok   |         |\n| 4294967302 |     6     |   1    |   ok   |         |\n| 4294967303 |     7     |   1    |   ok   |         |\n| 4294967304 |     8     |   1    |   ok   |         |\n| 4294967305 |     9     |   1    |   ok   |         |\n| 4294967306 |    10     |   1    |   ok   |         |\n| 4294967307 |    11     |   1    |   ok   |         |\n| 4294967308 |    12     |   1    |   ok   |         |\n+------------+-----------+--------+--------+---------+\n\nCluster health is:  ok\n")),(0,n.kt)("h4",{id:"umount"},"umount"),(0,n.kt)("h5",{id:"umount-fs"},"umount fs"),(0,n.kt)("p",null,"umount fs from the curvefs cluster"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs umount fs --fsname test1 --mountpoint siku-QiTianM420-N000:9002:/curvefs/client/mnt/home/siku/temp/mnt1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+--------+-------------------------------------------------------------------+---------+\n| fsName |                            mountpoint                             | result  |\n+--------+-------------------------------------------------------------------+---------+\n| test1  | siku-QiTianM420-N000:9003:/curvefs/client/mnt/home/siku/temp/mnt2 | success |\n+--------+-------------------------------------------------------------------+---------+\n")),(0,n.kt)("h4",{id:"usage"},"usage"),(0,n.kt)("h5",{id:"usage-inode"},"usage inode"),(0,n.kt)("p",null,"get the inode usage of curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs usage inode\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+------+----------------+-----+\n| fsId |     fsType     | num |\n+------+----------------+-----+\n|  2   |   inode_num    |  3  |\n|  2   | type_directory |  1  |\n|  2   |   type_file    |  0  |\n|  2   |    type_s3     |  2  |\n|  2   | type_sym_link  |  0  |\n|  3   |   inode_num    |  1  |\n|  3   | type_directory |  1  |\n|  3   |   type_file    |  0  |\n|  3   |    type_s3     |  0  |\n|  3   | type_sym_link  |  0  |\n+------+----------------+-----+\n")),(0,n.kt)("h5",{id:"usage-metadata"},"usage metadata"),(0,n.kt)("p",null,"get the usage of metadata in curvefs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs usage metadata\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+--------------------+---------+---------+---------+\n|   metaserverAddr   |  total  |  used   |  left   |\n+--------------------+---------+---------+---------+\n| **.***.***.**:6800 | 2.0 TiB | 182 GiB | 1.8 TiB |\n| **.***.***.**:6802 | 2.0 TiB | 182 GiB | 1.8 TiB |\n| **.***.***.**:6801 | 2.0 TiB | 182 GiB | 1.8 TiB |\n+--------------------+---------+---------+---------+\n")),(0,n.kt)("h4",{id:"warmup"},"warmup"),(0,n.kt)("h4",{id:"warmup-add"},"warmup add"),(0,n.kt)("p",null,"warmup a file(directory), or given a list file contains a list of files(directories) that you want to warmup."),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve fs warmup add /mnt/curvefs/warmup\ncurve fs warmup add --filelist /mnt/curvefs/warmup.list\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("inlineCode",{parentName:"p"},"curve fs warmup add /mnt/curvefs/warmup")," will warmup a file(directory).\n/mnt/curvefs/warmup.list")),(0,n.kt)("h3",{id:"bs"},"bs"),(0,n.kt)("h4",{id:"list-1"},"list"),(0,n.kt)("h6",{id:"list-logical-pool"},"list logical-pool"),(0,n.kt)("p",null,"list all logical pool information"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list logical-pool\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+----+-------+-----------+----------+-------+------+--------+------+--------+---------+\n| ID | NAME  | PHYPOOLID |   TYPE   | ALLOC | SCAN | TOTAL  | USED |  LEFT  | RECYCLE |\n+----+-------+-----------+----------+-------+------+--------+------+--------+---------+\n| 1  | pool1 | 1         | PAGEFILE | ALLOW | true | 44 GiB | 0 B  | 44 GiB | 0 B     |\n+----+-------+-----------+----------+-------+------+--------+------+--------+---------+\n")),(0,n.kt)("h6",{id:"list-server"},"list server"),(0,n.kt)("p",null,"list all server information in curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list server\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+----+---------------------+------+---------+-------------------+-------------------+\n| ID |      HOSTNAME       | ZONE | PHYPOOL |   INTERNALADDR    |   EXTERNALADDR    |\n+----+---------------------+------+---------+-------------------+-------------------+\n| 1  | ***************_0_0 | 1    | 1       | **.***.**.**:**** | **.***.**.**:**** |\n+----+---------------------+------+         +-------------------+-------------------+\n| 2  | ***************_1_0 | 2    |         | **.***.**.**:**** | **.***.**.**:**** |\n+----+---------------------+------+         +-------------------+-------------------+\n| 3  | ***************_2_0 | 3    |         | **.***.**.**:**** | **.***.**.**:**** |\n+----+---------------------+------+---------+-------------------+-------------------+\n")),(0,n.kt)("h6",{id:"list-client"},"list client"),(0,n.kt)("p",null,"list all client information in curvebs"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list client\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------------+------+\n|     IP     | PORT |\n+------------+------+\n| 172.17.0.2 | 9000 |\n+------------+------+\n")),(0,n.kt)("h6",{id:"list-dir"},"list dir"),(0,n.kt)("p",null,"list dir information in curvebs"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list dir --path /\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------+-------------+----------+-----------------+------------+---------------------+---------------+-------------+\n|  ID  |  FILENAME   | PARENTID |    FILETYPE     |   OWNER    |        CTIME        | ALLOCATEDSIZE |  FILESIZE   |\n+------+-------------+----------+-----------------+------------+---------------------+---------------+-------------+\n| 1    | /RecycleBin | 0        | INODE_DIRECTORY | root       | 2022-11-12 16:38:25 |      0 B      |     0 B     |\n+------+-------------+----------+-----------------+------------+---------------------+---------------+-------------+\n")),(0,n.kt)("h6",{id:"list-space"},"list space"),(0,n.kt)("p",null,"show curvebs all disk type space, include total space and used space"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list space\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+----------+---------+---------+---------+------------+---------+\n|   TYPE   | TOTAL   |  USED   |  LEFT   | RECYCLABLE | CREATED |\n+----------+---------+---------+---------+------------+---------+\n| physical | *** GiB | *** GiB | *** GiB | -          | -       |\n+----------+---------+---------+---------+------------+---------+\n| logical  | *** GiB | *** GiB | *** GiB | *** GiB    | *** GiB |\n+----------+---------+---------+---------+------------+---------+\n")),(0,n.kt)("h6",{id:"list-chunkserver"},"list chunkserver"),(0,n.kt)("p",null,"list chunkserver information in curvebs"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list chunkserver\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+----+------+-----------+------+-----------+------------+------------+-----------------------------------------------+--------------+-------------+------------------+-----------+\n| ID | TYPE |    IP     | PORT | RWSTATUS  | DISKSTATE  | COPYSETNUM |                  MOUNTPOINT                   | DISKCAPACITY |  DISKUSED   | UNHEALTHYCOPYSET |  EXTADDR  |\n+----+------+-----------+------+-----------+------------+------------+-----------------------------------------------+--------------+-------------+------------------+-----------+\n| 1  | nvme | 127.0.0.1 | 8201 | READWRITE | DISKNORMAL | 100        | local:///curvebs/playground/chunkserver1/data | 39 GiB       | 42140479488 | 0 %              | 127.0.0.1 |\n+----+      +           +------+           +            +------------+-----------------------------------------------+--------------+-------------+------------------+           +\n| 2  |      |           | 8202 |           |            | 100        | local:///curvebs/playground/chunkserver2/data | 39 GiB       | 42140479488 | 0 %              |           |\n+----+      +           +------+           +            +------------+-----------------------------------------------+--------------+-------------+------------------+           +\n| 3  |      |           | 8200 |           |            | 100        | local:///curvebs/playground/chunkserver0/data | 39 GiB       | 42140479488 | 0 %              |           |\n+----+------+-----------+------+-----------+------------+------------+-----------------------------------------------+--------------+-------------+------------------+-----------+\n")),(0,n.kt)("h6",{id:"list-scan-status"},"list scan-status"),(0,n.kt)("p",null,"list curvebs all copyset that scanning is false"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list scan-status\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+-------------+-----------+\n| LOGICALPOOL | COPYSETID |\n+-------------+-----------+\n| 1           | 1         |\n+-------------+-----------+\n| 1           | 10        |\n+-------------+-----------+\n| 1           | 100       |\n+-------------+-----------+\n| 1           | 11        |\n+-------------+-----------+\n| 1           | 12        |\n+-------------+-----------+\n| 1           | 13        |\n+-------------+-----------+\n| 1           | 14        |\n+-------------+-----------+\n| 1           | 15        |\n+-------------+-----------+\n| 1           | 16        |\n+-------------+-----------+\n| 1           | 17        |\n+-------------+-----------+\n| 1           | 18        |\n+-------------+-----------+\n| 1           | 19        |\n+-------------+-----------+\n| 1           | 2         |\n+-------------+-----------+\n| 1           | 20        |\n+-------------+-----------+\n| 1           | 21        |\n+-------------+-----------+\n| 1           | 22        |\n+-------------+-----------+\n| 1           | 23        |\n+-------------+-----------+\n| 1           | 24        |\n+-------------+-----------+\n| 1           | 25        |\n+-------------+-----------+\n| 1           | 26        |\n+-------------+-----------+\n| 1           | 27        |\n+-------------+-----------+\n| 1           | 28        |\n+-------------+-----------+\n| 1           | 29        |\n+-------------+-----------+\n| 1           | 3         |\n+-------------+-----------+\n| 1           | 30        |\n+-------------+-----------+\n| 1           | 31        |\n+-------------+-----------+\n| 1           | 32        |\n+-------------+-----------+\n| 1           | 33        |\n+-------------+-----------+\n| 1           | 34        |\n+-------------+-----------+\n| 1           | 35        |\n+-------------+-----------+\n| 1           | 36        |\n+-------------+-----------+\n| 1           | 37        |\n+-------------+-----------+\n| 1           | 38        |\n+-------------+-----------+\n| 1           | 39        |\n+-------------+-----------+\n| 1           | 4         |\n+-------------+-----------+\n| 1           | 40        |\n+-------------+-----------+\n| 1           | 41        |\n+-------------+-----------+\n| 1           | 42        |\n+-------------+-----------+\n| 1           | 43        |\n+-------------+-----------+\n| 1           | 44        |\n+-------------+-----------+\n| 1           | 45        |\n+-------------+-----------+\n| 1           | 46        |\n+-------------+-----------+\n| 1           | 47        |\n+-------------+-----------+\n| 1           | 48        |\n+-------------+-----------+\n| 1           | 49        |\n+-------------+-----------+\n| 1           | 5         |\n+-------------+-----------+\n| 1           | 50        |\n+-------------+-----------+\n| 1           | 51        |\n+-------------+-----------+\n| 1           | 52        |\n+-------------+-----------+\n| 1           | 53        |\n+-------------+-----------+\n| 1           | 54        |\n+-------------+-----------+\n| 1           | 55        |\n+-------------+-----------+\n| 1           | 56        |\n+-------------+-----------+\n| 1           | 57        |\n+-------------+-----------+\n| 1           | 58        |\n+-------------+-----------+\n| 1           | 59        |\n+-------------+-----------+\n| 1           | 6         |\n+-------------+-----------+\n| 1           | 60        |\n+-------------+-----------+\n| 1           | 61        |\n+-------------+-----------+\n| 1           | 62        |\n+-------------+-----------+\n| 1           | 63        |\n+-------------+-----------+\n| 1           | 64        |\n+-------------+-----------+\n| 1           | 65        |\n+-------------+-----------+\n| 1           | 66        |\n+-------------+-----------+\n| 1           | 67        |\n+-------------+-----------+\n| 1           | 68        |\n+-------------+-----------+\n| 1           | 69        |\n+-------------+-----------+\n| 1           | 7         |\n+-------------+-----------+\n| 1           | 70        |\n+-------------+-----------+\n| 1           | 71        |\n+-------------+-----------+\n| 1           | 72        |\n+-------------+-----------+\n| 1           | 73        |\n+-------------+-----------+\n| 1           | 74        |\n+-------------+-----------+\n| 1           | 75        |\n+-------------+-----------+\n| 1           | 76        |\n+-------------+-----------+\n| 1           | 77        |\n+-------------+-----------+\n| 1           | 78        |\n+-------------+-----------+\n| 1           | 79        |\n+-------------+-----------+\n| 1           | 8         |\n+-------------+-----------+\n| 1           | 80        |\n+-------------+-----------+\n| 1           | 81        |\n+-------------+-----------+\n| 1           | 82        |\n+-------------+-----------+\n| 1           | 83        |\n+-------------+-----------+\n| 1           | 84        |\n+-------------+-----------+\n| 1           | 85        |\n+-------------+-----------+\n| 1           | 86        |\n+-------------+-----------+\n| 1           | 87        |\n+-------------+-----------+\n| 1           | 88        |\n+-------------+-----------+\n| 1           | 89        |\n+-------------+-----------+\n| 1           | 9         |\n+-------------+-----------+\n| 1           | 90        |\n+-------------+-----------+\n| 1           | 91        |\n+-------------+-----------+\n| 1           | 92        |\n+-------------+-----------+\n| 1           | 93        |\n+-------------+-----------+\n| 1           | 94        |\n+-------------+-----------+\n| 1           | 95        |\n+-------------+-----------+\n| 1           | 96        |\n+-------------+-----------+\n| 1           | 97        |\n+-------------+-----------+\n| 1           | 98        |\n+-------------+-----------+\n| 1           | 99        |\n+-------------+-----------+\n")),(0,n.kt)("h6",{id:"list-may-broken-vol"},"list may-broken-vol"),(0,n.kt)("p",null,"list may broken volumes"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs list may-broken-vol\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+----------+\n| FILENAME | \n+----------+\n|   test   |        \n+----------+\n")),(0,n.kt)("h4",{id:"clean-recycle"},"clean-recycle"),(0,n.kt)("p",null,"clean the recycle bin "),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs clean-recycle --recycleprefix=/test --expiredtime=1h\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+---------+\n| RESULT  | \n+---------+\n| success |        \n+---------+\n")),(0,n.kt)("h4",{id:"query-1"},"query"),(0,n.kt)("h6",{id:"query-file"},"query file"),(0,n.kt)("p",null,"query the file info and actual space"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs query file --path=/test\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------+------+----------------+-------+--------+---------+--------+-----+---------------------+--------------+---------+-----------------+----------+\n|  ID  | NAME |      TYPE      | OWNER | CHUNK  | SEGMENT | LENGTH | SEQ |        CTIME        |    STATUS    | STRIPE  |    THROTTLE     |  ALLOC   |\n+------+------+----------------+-------+--------+---------+--------+-----+---------------------+--------------+---------+-----------------+----------+\n| 1003 | test | INODE_PAGEFILE | test  | 16 MiB | 1.0 GiB | 10 GiB | 1   | 2022-08-29 17:00:55 | kFileCreated | count:0 | type:IOPS_TOTAL | size:0 B |\n|      |      |                |       |        |         |        |     |                     |              | uint:0  | limit:2000      |          |\n|      |      |                |       |        |         |        |     |                     |              |         | type:BPS_TOTAL  |          |\n|      |      |                |       |        |         |        |     |                     |              |         | limit:125829120 |          |\n+------+------+----------------+-------+--------+---------+--------+-----+---------------------+--------------+---------+-----------------+----------+\n")),(0,n.kt)("h6",{id:"query-chunk"},"query chunk"),(0,n.kt)("p",null,"query the location of the chunk corresponding to the offset"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs query chunk --path /test1 --offset 1008600000 \n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+-------+-------------+---------+------------+----------------------+\n| CHUNK | LOGICALPOOL | COPYSET |   GROUP    |       LOCATION       |\n+-------+-------------+---------+------------+----------------------+\n| 61    | 1           | 61      | 4294967357 | ***.***.***.***:**** |\n|       |             |         |            | ***.***.***.***:**** |\n|       |             |         |            | ***.***.***.***:**** |\n+-------+-------------+---------+------------+----------------------+\n")),(0,n.kt)("h6",{id:"query-segment"},"query segment"),(0,n.kt)("p",null,"query the segments info of the file"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs query seginfo --path /test1 \n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+-------------+-------------+-----------+------------+---------+-------+\n| LOGICALPOOL | SEGMENTSIZE | CHUNKSIZE |   START    | COPYSET | CHUNK |\n+-------------+-------------+-----------+------------+---------+-------+\n| 1           | 1073741824  | 16777216  | 0          | 1       | 1     |\n+             +             +           +            +---------+-------+\n|                        ......                                        |\n+             +             +           +------------+---------+-------+\n|             |             |           | 9663676416 | 1       | 101   |\n+             +             +           +            +---------+-------+\n|                        ......                                        |\n+             +             +           +            +---------+-------+\n|             |             |           |            | 99      | 99    |\n+-------------+-------------+-----------+------------+---------+-------+\n")),(0,n.kt)("h5",{id:"query-scan-status"},"query scan-status"),(0,n.kt)("p",null,"quey ScanStatus Info in bs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs query scan-satus --copysetid 1 --logicalpoolid 1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+-------------+-----------+-------+-------------+--------------------+\n| LOGICALPOOL | COPYSETID | SCAN  | LASTSCANSEC | LASTSCANCONSISTENT |\n+-------------+-----------+-------+-------------+--------------------+\n| 1           | 1         | false | 1684425801  | true               |\n+-------------+-----------+-------+-------------+--------------------+\n")),(0,n.kt)("h4",{id:"status-1"},"status"),(0,n.kt)("h5",{id:"status-etcd-1"},"status etcd"),(0,n.kt)("p",null,"get the etcd status of curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs status etcd\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+---------------------+---------+----------+\n|        ADDR         | VERSION |  STATUS  |\n+---------------------+---------+----------+\n| ***.***.*.***:***** | 3.4.10  | follower |\n+---------------------+         +          +\n| ***.***.*.***:***** |         |          |\n+---------------------+         +----------+\n| ***.***.*.***:***** |         | leader   |\n+---------------------+---------+----------+\n")),(0,n.kt)("h5",{id:"status-mds-1"},"status mds"),(0,n.kt)("p",null,"get the mds status of curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs status mds\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+-------------------+-------------------+-------------------+----------+\n|       ADDR        |     DUMMYADDR     |      VERSION      |  STATUS  |\n+-------------------+-------------------+-------------------+----------+\n| **.***.**.**:**** | **.***.**.**:**** | ci+562296c7+debug | follower |\n+-------------------+-------------------+                   +          +\n| **.***.**.**:**** | **.***.**.**:**** |                   |          |\n+-------------------+-------------------+                   +----------+\n| **.***.**.**:**** | **.***.**.**:**** |                   | leader   |\n+-------------------+-------------------+-------------------+----------+\n")),(0,n.kt)("h5",{id:"status-client"},"status client"),(0,n.kt)("p",null,"get the client status of curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs status client\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+-------------+----------------+---------------------+-----+\n|    TYPE     |    VERSION     |        ADDR         | NUM |\n+-------------+----------------+---------------------+-----+\n| nebd-server | 9.9.9+2c4861ca | ***.***.**.***:**** | 2   |\n+             +                +---------------------+     +\n|             |                | ***.***.**.***:**** |     |\n+-------------+----------------+---------------------+-----+\n")),(0,n.kt)("h5",{id:"status-snapshotserver"},"status snapshotserver"),(0,n.kt)("p",null,"get the mds status of curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs status snapshotserver\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+---------------------+---------------------+-------------------+----------+\n|        ADDR         |      DUMMYADDR      |    VERSION        |  STATUS  |\n+---------------------+---------------------+-------------------+----------+\n| ***.***.**.***:**** | ***.***.**.***:**** | ci+562296c7+debug | follower |\n+---------------------+---------------------+                   +          +\n| ***.***.**.***:**** | ***.***.**.***:**** |                   |          |\n+---------------------+---------------------+                   +----------+\n| ***.***.**.***:**** | ***.***.**.***:**** |                   | leader   |\n+---------------------+---------------------+-------------------+----------+\n")),(0,n.kt)("h5",{id:"status-chunkserver"},"status chunkserver"),(0,n.kt)("p",null,"get the chunkserver status of curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs status chunkserver\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------------------+------------------+----------------+--------+------------+\n|   EXTERNALADDR   |   INTERNALADDR   |    VERSION     | STATUS | RECOVERING |\n+------------------+------------------+----------------+--------+------------+\n| **************** | **************** | d9b6bb98+debug | online | false      |\n+------------------+------------------+                +        +            +\n| **************** | **************** |                |        |            |\n+------------------+------------------+                +        +            +\n| **************** | **************** |                |        |            |\n+------------------+------------------+----------------+--------+------------+\n")),(0,n.kt)("h5",{id:"status-copyset-1"},"status copyset"),(0,n.kt)("p",null,"get the copyset status of curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs status copyset\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------------+-----------+--------+--------+--------+---------+\n| COPYSETKEY | COPYSETID | POOLID | STATUS | LOGGAP | EXPLAIN |\n+------------+-----------+--------+--------+--------+---------+\n| 4294967297 | 1         | 1      | ok     | 0      |         |\n+------------+-----------+        +        +--------+---------+\n| ......     |  ......   | ...... | ...... | ...... | ......  |\n+------------+-----------+        +        +--------+---------+\n| 4294967395 | 99        |        |        | 0      |         |\n+------------+-----------+--------+--------+--------+---------+\n")),(0,n.kt)("h4",{id:"delete-1"},"delete"),(0,n.kt)("h5",{id:"delete-peer"},"delete peer"),(0,n.kt)("p",null,"delete the peer from the copyset"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs delete peer\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------------------+------------------+---------+---------+--------+\n|      LEADER      |       PEER       | COPYSET | RESULT  | REASON |\n+------------------+------------------+---------+---------+--------+\n| 127.0.0.1:8201:0 | 127.0.0.1:8202:0 | (1:29)  | success | null   |\n+------------------+------------------+---------+---------+--------+\n")),(0,n.kt)("h5",{id:"delete-volume"},"delete volume"),(0,n.kt)("h6",{id:"delete-volume-clone"},"delete volume clone"),(0,n.kt)("p",null,"delete volume clone tasks in curvebs cluster"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs delete volume clone\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------+--------------------------------------+--------------------------------------+-------+---------+            \n| USER |                 SRC                  |               TASK ID                | FILE  | RESULT  |            \n+------+--------------------------------------+--------------------------------------+-------+---------+            \n| root | a19b5e5e-b306-488f-8e6d-d87282c869cb | d26e27a8-fcbd-4f7a-adf8-53795217cbb0 | /root | success |            \n+------+--------------------------------------+--------------------------------------+-------+---------+  \n")),(0,n.kt)("h6",{id:"delete-volume-recover"},"delete volume recover"),(0,n.kt)("p",null,"delete volume recover tasks in curvebs cluster"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs delete volume recover\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"+------+--------------------------------------+--------------------------------------+-------+---------+             \n| USER |                 SRC                  |               TASK ID                | FILE  | RESULT  |             \n+------+--------------------------------------+--------------------------------------+-------+---------+             \n| root | a19b5e5e-b306-488f-8e6d-d87282c869cb | 9dfa8699-a275-4891-8ec2-e447a0ccc77c | /root | success |             \n+------+--------------------------------------+--------------------------------------+-------+---------+   \n")),(0,n.kt)("h4",{id:"update"},"update"),(0,n.kt)("h5",{id:"update-peer"},"update peer"),(0,n.kt)("p",null,"reset peer"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs update peer 127.0.0.0:8200:0 --logicalpoolid=1 --copysetid=1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+----------------------+---------+---------+--------+\n|         PEER         | COPYSET | RESULT  | REASON |\n+----------------------+---------+---------+--------+\n|   127.0.0.0:8200:0   | (1:1)   | success | null   |\n+----------------------+---------+---------+--------+\n")),(0,n.kt)("h5",{id:"update-leader"},"update leader"),(0,n.kt)("p",null,"transfer leader"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs update leader 127.0.0.1:8202:0 --logicalpoolid=1 --copysetid=1 --peers=127.0.0.1:8200:0,127.0.0.1:8201:0,127.0.0.1:8202:0\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+-----------------------+-----------------------+---------+---------+\n|        LEADER         |       OLDLEADER       | COPYSET | RESULT  |\n+-----------------------+-----------------------+---------+---------+\n| ***.***.**.***:****:* | ***.***.**.***:****:* | (1:1)   | success |\n+-----------------------+-----------------------+---------+---------+\n")),(0,n.kt)("h5",{id:"update-file"},"update file"),(0,n.kt)("p",null,"expand pagefile"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs update file --path /test2/test1 --size 10\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+---------+\n| RESULT  |\n+---------+\n| success |\n+---------+\n")),(0,n.kt)("h5",{id:"update-throttle"},"update throttle"),(0,n.kt)("p",null,"update file throttle params"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs update throttle --path /test1 --type=bps_total --limit 20000\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+---------+\n| RESULT  |\n+---------+\n| success |\n+---------+\n")),(0,n.kt)("h5",{id:"update-scan-state"},"update scan-state"),(0,n.kt)("p",null,"enable/disable scan for logical pool"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs update scan-state --logicalpoolid 1 [--scan=true/false]\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+----+------+---------+--------+\n| ID | SCAN | RESULT  | REASON |\n+----+------+---------+--------+\n| 1  | true | success | null   |\n+----+------+---------+--------+\n")),(0,n.kt)("h5",{id:"update-copyset-availflag"},"update copyset availflag"),(0,n.kt)("p",null,"update copyset availflag"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs update copyset availflag --availflag=true [--dryrun=true/false]\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+--------+-----------+---------------+--------+\n| POOLID | COPYSETID |   AVAILFLAG   | DRYRUN |\n+--------+-----------+---------------+--------+\n| 1      | 1         | false => true | true   |\n+--------+-----------+---------------+--------+\n")),(0,n.kt)("h5",{id:"update-leader-schedule"},"update leader-schedule"),(0,n.kt)("p",null,'"rapidly transfer leader'),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs update leader-schedule --logicalpoolid 1\ncurve bs update leader-schedule --all\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+---------+--------+\n| RESULT  | REASON |\n+---------+--------+\n| success | null   |\n+---------+--------+\n")),(0,n.kt)("h4",{id:"create-1"},"create"),(0,n.kt)("h5",{id:"create-file"},"create file"),(0,n.kt)("p",null,"create pagefile"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs create file --path /test2/test4  --size 10\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+---------+\n| RESULT  |\n+---------+\n| success |\n+---------+\n")),(0,n.kt)("h5",{id:"create-dir"},"create dir"),(0,n.kt)("p",null,"create directory"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs create dir --path /test2/test5 \n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+---------+\n| RESULT  |\n+---------+\n| success |\n+---------+\n")),(0,n.kt)("h4",{id:"check-1"},"check"),(0,n.kt)("h5",{id:"check-copyset-1"},"check copyset"),(0,n.kt)("p",null,"check copysets health in curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve bs check copyset --copysetid 1 --logicalpoolid 1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+------------+-----------+--------+--------+--------+---------+\n| COPYSETKEY | COPYSETID | POOLID | STATUS | LOGGAP | EXPLAIN |\n+------------+-----------+--------+--------+--------+---------+\n| 4294967297 | 1         | 1      | ok     | 0      |         |\n+------------+-----------+--------+--------+--------+---------+\n")),(0,n.kt)("h5",{id:"check-chunkserver"},"check chunkserver"),(0,n.kt)("p",null,"check chunkserver health in curvebs"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve bs check chunkserver --chunkserverid 1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+------------+-----------+--------+--------+--------+---------+\n| CHUNKSERVERID | HELATHYCOUNT | UNHEALTHYCOUNT | UNHEALTHYRATIO |\n+------------+-----------+--------+--------+--------+---------+\n| 1             | 100          | 0              | 0.00%          |   \n+------------+-----------+--------+--------+--------+---------+\n")),(0,n.kt)("h5",{id:"check-server"},"check server"),(0,n.kt)("p",null,"check copysets health in server"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"curve bs check server --serverid 1\ncurve bs check server --ip 127.0.0.1 --port 8200\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"+--------+-----------+-------+------------------+\n| SERVER |    IP     | TOTAL | UNHEALTHYCOPYSET |\n+--------+-----------+-------+------------------+\n| 1      | 127.0.0.1 | 100   | 0(0%)            |\n+--------+-----------+-------+------------------+\n")),(0,n.kt)("h4",{id:"snapshot"},"snapshot"),(0,n.kt)("h5",{id:"snapshot-copyset"},"snapshot copyset"),(0,n.kt)("p",null,"take snapshot for copyset"),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs snapshot copyset 127.0.0.0:8200:0 --logicalpoolid=1 --copysetid=1\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+-----------------------+---------+---------+\n|         PEER          | COPYSET | RESULT  |\n+-----------------------+---------+---------+\n| ***.***.**.***:****:* | (**:**) | success |\n+-----------------------+---------+---------+\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curve bs snapshot copyset --all\n")),(0,n.kt)("p",null,"Output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"+----------------+---------+\n|  CHUNKSERVER   | RESULT  |\n+----------------+---------+\n| **.*.*.**:8200 | failed  |\n+----------------+---------+\n| **.*.*.**:8201 | success |\n+----------------+         +\n| **.*.*.**:8202 |         |\n+----------------+---------+\n")),(0,n.kt)("h2",{id:"comparison-of-old-and-new-commands"},"Comparison of old and new commands"),(0,n.kt)("h3",{id:"curve-fs"},"curve fs"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"old"),(0,n.kt)("th",{parentName:"tr",align:null},"new"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool check-copyset"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs check copyset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool create-fs"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs create fs")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool create-topology"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs create topology")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool delete-fs"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs delete fs")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool list-copyset"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs list copyset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool list-fs"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs list fs")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool list-fs"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs list mountpoint")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool list-partition"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs list partition")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool query-copyset"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs query copyset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool query-fs"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs query fs")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool query-inode"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs query inode")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool query-metaserver"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs query metaserver")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool query-partition"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs query partition")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool status-mds"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs status mds")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool status-metaserver"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs status metaserver")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool status-etcd"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs status etcd")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool status-copyset"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs status copyset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool status-cluster"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs status cluster")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool umount-fs"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs umount fs")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool usage-inode"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs usage inode")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curvefs_tool usage-metadata"),(0,n.kt)("td",{parentName:"tr",align:null},"curve fs usage metadata")))),(0,n.kt)("h3",{id:"curve-bs"},"curve bs"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"old"),(0,n.kt)("th",{parentName:"tr",align:null},"new"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool logical-pool-list"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list logical-pool")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool get -fileName="),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs query file -path")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool etcd-status"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs status etcd")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool mds-status"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs status mds")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool server-list"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list server")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool client-list"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list client")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool delete"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs delete file")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool list"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list dir")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool create"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs create file/dir")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool seginfo"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs query seginfo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool chunk-location"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs query chunk")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool remove-peer"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs delete peer")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool reset-peer"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs update peer")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool space"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list space")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool update-throttle"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs update throttle")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool check-copyset"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs check copyset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool client-status"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs status client")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool check-operator"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs check operator")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool snapshot-clone-status"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs status snapshotserver")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool transfer-leader"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs update leader")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool do-snapshot"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs snapshot copyset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool set-scan-state"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs update scan-state")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool chunkserver-status"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs status chunkserver")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool chunkserver-list"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list chunkserver")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool set-copyset-availflag"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs update copyset availflag")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool scan-status"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list/query scan-status")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool clean-recycle"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs clean-recycle")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool copysets-status"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs status copyset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool list-may-broken-vol"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs list may-broken-vol")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool rapid-leader-schedule"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs update leader-schedule")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool do-snapshot-all"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs snapshot --all")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool check-chunkserver"),(0,n.kt)("td",{parentName:"tr",align:null},"curbe bs check chunkserver")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool status"),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool check-consistency"),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"curve_ops_tool check-server"),(0,n.kt)("td",{parentName:"tr",align:null},"curve bs check server")))))}k.isMDXComponent=!0}}]);